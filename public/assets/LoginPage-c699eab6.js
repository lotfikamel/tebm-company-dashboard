import{r as h,a as x,b as f,j as e,L as j,A as b,c as N,d as E}from"./index-8aeefa04.js";const v=n=>{const[o,i]=h.useState(n),s=h.useRef(n);return[o,t=>{s.current=t.constructor.name=="Function"?t(s.current):t,i(t)},s]},y=({initInputs:n,errorMessages:o})=>{const[i,s]=h.useState(n),[c,t,d]=v({});return{inputs:i,setInputs:s,handleInputTextChange:r=>{s(a=>({...a,[r.target.name]:r.target.type==="checkbox"?r.target.checked:r.target.value}))},errors:c,errorsRef:d,clearErrors:()=>{t({})},addErrors:r=>{for(let a in r)t(p=>({...p,[a]:o[a][r[a]]}))},hasFailed:(...r)=>{const a={...d.current};return r.forEach(p=>{delete a[p]}),Object.keys(a).length>0}}},R=()=>{const n=x(),{sending:o,login:i}=f(),{inputs:s,errors:c,handleInputTextChange:t,addErrors:d}=y({initInputs:{email:"",password:""},errorMessages:{login:{notFound:"Ce compte n'existe pas.",error:"Une erreur s'est produite."}}}),m=g=>{if(g.preventDefault(),o===!1){const u={};for(let l in s)u[l]=s[l].trim();i(u).then(()=>{n("/",{replace:!0})}).catch(l=>{d(l)})}};return e.jsx("div",{id:"login-page",children:e.jsx("div",{className:"container mx-auto px-4 lg:py-8 flex justify-center",children:e.jsxs("div",{className:"lg:w-2/5 border border-stone-200 p-6 rounded-xl",children:[e.jsx("div",{children:e.jsx("img",{src:j,alt:"",className:"logo",width:"200"})}),e.jsxs("h1",{className:"first-letter:uppercase mb-8 font-bold",children:["Bienvenue sur ",b," Entreprise"]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"email",value:s.email,onChange:t,className:"input input-bordered w-full",placeholder:"Email",autoComplete:"off"})}),e.jsx("div",{children:e.jsx("input",{type:"password",name:"password",value:s.password,onChange:t,className:"input input-bordered w-full",placeholder:"Mot de passe"})}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"submit",className:N("btn btn-primary",{loading:o}),children:"connexion"})}),c.login&&e.jsx(E,{message:c.login})]})]})})})};export{R as default};
