import{j as e,h as j,x as c,_ as i,R as v,D as g,F as p,$ as f}from"./index-8aeefa04.js";import{b as N,c as Y}from"./RevenuesQueries-e1c6d87d.js";import{G as R}from"./GridList-b4bd86fb.js";import"./useInfiniteQuery-bc6f39db.js";import"./chevron-right-ec77f771.js";const y=({revenue:s,groupBy:a})=>{const r={[i.DAYS]:"DD MMMM YYYY",[i.MONTHS]:"MMMM YYYY",[i.YEARS]:"YYYY"};return e.jsxs("div",{className:"shadow-lg bg-white p-4 rounded-xl",children:[e.jsx("div",{className:"text-stone-500",children:j(s.creationDate).format(r[a])}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:"revenus"}),e.jsx("div",{className:"font-bold text-green-500",children:c(s.totalRevenues)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:"courses"}),e.jsx("div",{className:"font-bold",children:s.totalRides})]})]})},E=({title:s,stat:a})=>e.jsx("div",{className:"stats shadow",children:e.jsxs("div",{className:"stat",children:[e.jsx("div",{className:"stat-title",children:s}),e.jsx("div",{className:"stat-value text-green-500",children:a})]})}),M=()=>{const{data:s,isLoading:a,isError:r}=Y();return a||r?null:e.jsx("div",{children:e.jsx(E,{title:"Total des revenus",stat:c(s)})})},P=()=>{const[s,a]=v.useState({groupBy:i.DAYS}),{data:r,isLoading:n,isError:l,refetch:o,hasNextPage:d,fetchNextPage:m,isFetchingNextPage:x}=N({filters:s}),u=t=>{a(h=>({...h,[t.target.name]:t.target.value.trim()}))};return e.jsx("div",{id:"revenues-page",children:e.jsxs("div",{className:"container px-4 mx-auto",children:[e.jsx("h1",{className:"font-bold first-letter:uppercase mb-8",children:"Revenus"}),e.jsx("hr",{className:"my-6"}),n&&e.jsx(g,{}),!n&&l&&e.jsx(p,{tryAgain:o}),!n&&!l&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{}),e.jsx("div",{children:e.jsx("select",{name:"groupBy",className:"select select-bordered w-full",value:s.groupBy,onChange:u,children:Object.values(i).map(t=>e.jsx("option",{value:t,children:f(t)},t))})}),e.jsx(R,{data:r,renderElements:t=>e.jsx(y,{revenue:t,groupBy:s.groupBy},t._id),fetchNextPage:m,isFetchingNextPage:x,hasNextPage:d,className:"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"})]})]})})};export{P as default};
